<div>
    <ul>
        <li title=""><a href="https://intranet.alxswe.com/projects/current">
                <div><br></div>
            </a></li>
        <li title=""><a href="https://intranet.alxswe.com/corrections/to_review">
                <div><br></div>
            </a></li>
        <li title=""><a href="https://intranet.alxswe.com/dashboards/my_current_evaluation_quizzes">
                <div><br></div>
            </a></li>
        <li>
            <hr title="My resources">
        </li>
        <li title=""><a href="https://intranet.alxswe.com/dashboards/my_curriculums">
                <div><br></div>
            </a></li>
        <li title=""><a href="https://intranet.alxswe.com/concepts">
                <div><br></div>
            </a></li>
        <li title=""><a href="https://intranet.alxswe.com/dashboards/video_rooms">
                <div><br></div>
            </a></li>
        <li title=""><a href="https://intranet.alxswe.com/servers">
                <div><br></div>
            </a></li>
        <li title=""><a href="https://intranet.alxswe.com/user_containers/current">
                <div><br></div>
            </a></li>
        <li title=""><a href="https://intranet.alxswe.com/dashboards/my_tools">
                <div><br></div>
            </a></li>
        <li title=""><a href="https://intranet.alxswe.com/dashboards/videos">
                <div><br></div>
            </a></li>
        <li>
            <hr title="My campus">
        </li>
        <li title=""><a href="https://intranet.alxswe.com/users/peers">
                <div><br></div>
            </a></li>
        <li title=""><a href="https://intranet.alxswe.com/dashboards/my_captain_log">
                <div><br></div>
            </a></li>
        <li>
            <div title=""><a target="_blank" href="https://alx-students.slack.com/">
                    <div>
                        <div><br></div>
                    </div>
                </a></div>
            <div title=""><a href="https://intranet.alxswe.com/users/my_profile">
                    <div>
                        <div><br></div>
                    </div>
                </a></div>
        </li>
    </ul>
</div>
<main>
    <div><br></div>
    <article>
        <div>
            <div>
                <h1>0x02. AirBnB clone - MySQL</h1>
                <div>
                    <div>Group projectPythonOOPBack-endSQLMySQLORMSQLAlchemy</div>
                </div>
                <div>
                    <ul>
                        <li>&nbsp;By:&nbsp;Guillaume</li>
                        <li>&nbsp;Weight:&nbsp;2</li>
                        <li>&nbsp;Project to be done in teams of&nbsp;2&nbsp;people&nbsp;(your team:&nbsp;jeremiah Emuan, Julius Njeri)</li>
                        <li>&nbsp;Project will start&nbsp;<span title="">Jun 16, 2023 6:00 AM</span>, must end by&nbsp;<span title="">Jun 22, 2023 6:00 AM</span></li>
                        <li>&nbsp;Checker&nbsp;was&nbsp;released at&nbsp;<span title="">Jun 17, 2023 6:00 PM</span></li>
                        <li>&nbsp;An auto review will be launched at the deadline</li>
                    </ul>
                </div>
                <div>
                    <div>
                        <h2>Background Context</h2>
                        <p>Environment variables will be your best friend for this project!</p>
                        <ul>
                            <li><code>HBNB_ENV</code>: running environment. It can be &ldquo;dev&rdquo; or &ldquo;test&rdquo; for the moment (&ldquo;production&rdquo; soon!)</li>
                            <li><code>HBNB_MYSQL_USER</code>: the username of your MySQL</li>
                            <li><code>HBNB_MYSQL_PWD</code>: the password of your MySQL</li>
                            <li><code>HBNB_MYSQL_HOST</code>: the hostname of your MySQL</li>
                            <li><code>HBNB_MYSQL_DB</code>: the database name of your MySQL</li>
                            <li><code>HBNB_TYPE_STORAGE</code>: the type of storage used. It can be &ldquo;file&rdquo; (using&nbsp;<code>FileStorage</code>) or&nbsp;<code>db</code> (using&nbsp;<code>DBStorage</code>)</li>
                        </ul>
                        <h2>Resources</h2>
                        <p><strong>Read or watch</strong>:</p>
                        <ul>
                            <li><a href="https://intranet.alxswe.com/rltoken/OG2OW5Pbjs-ds3ZHT0ow4g" title="cmd module" target="_blank">cmd module</a></li>
                            <li><strong>packages</strong> concept page</li>
                            <li><a href="https://intranet.alxswe.com/rltoken/g0tzN6ea1hWCj5OF99HB9w" title="unittest module" target="_blank">unittest module</a></li>
                            <li><a href="https://intranet.alxswe.com/rltoken/F6YRBSrkkkTTMVc66iaMgA" title="args/kwargs" target="_blank">args/kwargs</a></li>
                            <li><a href="https://intranet.alxswe.com/rltoken/GYWCmxokUZKAr-T93iQPcQ" title="SQLAlchemy tutorial" target="_blank">SQLAlchemy tutorial</a></li>
                            <li><a href="https://intranet.alxswe.com/rltoken/m4ogDCoKVm3Us0FybYh1tA" title="How To Create a New User and Grant Permissions in MySQL" target="_blank">How To Create a New User and Grant Permissions in MySQL</a></li>
                            <li><a href="https://intranet.alxswe.com/rltoken/FJCSaX1TCf0HAOzhsH_eWA" title="Python3 and environment variables" target="_blank">Python3 and environment variables</a></li>
                            <li><a href="https://intranet.alxswe.com/rltoken/bWxESLJVYGNonjOYg8fOVg" title="SQLAlchemy" target="_blank">SQLAlchemy</a></li>
                            <li><a href="https://intranet.alxswe.com/rltoken/n6ePnCDwnbQMbxGgeoe1VA" title="MySQL 8.0 SQL Statement Syntax" target="_blank">MySQL 8.0 SQL Statement Syntax</a></li>
                        </ul>
                        <h2>Learning Objectives</h2>
                        <p>At the end of this project, you are expected to be able to&nbsp;<a href="https://intranet.alxswe.com/rltoken/3nWKduPHOPRUFGNEtT-SMw" title="explain to anyone" target="_blank">explain to anyone</a>,&nbsp;<strong>without the help of Google</strong>:</p>
                        <h3>General</h3>
                        <ul>
                            <li>What is Unit testing and how to implement it in a large project</li>
                            <li>What is&nbsp;<code>*args</code> and how to use it</li>
                            <li>What is&nbsp;<code>**kwargs</code> and how to use it</li>
                            <li>How to handle named arguments in a function</li>
                            <li>How to create a MySQL database</li>
                            <li>How to create a MySQL user and grant it privileges</li>
                            <li>What ORM means</li>
                            <li>How to map a Python Class to a MySQL table</li>
                            <li>How to handle 2 different storage engines with the same codebase</li>
                            <li>How to use environment variables</li>
                        </ul>
                        <h3>Copyright - Plagiarism</h3>
                        <ul>
                            <li>You are tasked to come up with solutions for the tasks below yourself to meet with the above learning objectives.</li>
                            <li>You will not be able to meet the objectives of this or any following project by copying and pasting someone else&rsquo;s work.</li>
                            <li>You are not allowed to publish any content of this project.</li>
                            <li>Any form of plagiarism is strictly forbidden and will result in removal from the program.</li>
                        </ul>
                        <h2>Requirements</h2>
                        <h3>Python Scripts</h3>
                        <ul>
                            <li>Allowed editors:&nbsp;<code>vi</code>,&nbsp;<code>vim</code>,&nbsp;<code>emacs</code></li>
                            <li>All your files will be interpreted/compiled on Ubuntu 20.04 LTS using python3 (version 3.8.5)</li>
                            <li>All your files should end with a new line</li>
                            <li>The first line of all your files should be exactly&nbsp;<code>#!/usr/bin/python3</code></li>
                            <li>A&nbsp;<code>README.md</code> file, at the root of the folder of the project, is mandatory</li>
                            <li>Your code should use the pycodestyle (version&nbsp;<code>2.8.*</code>)</li>
                            <li>All your files must be executable</li>
                            <li>The length of your files will be tested using&nbsp;<code>wc</code></li>
                            <li>All your modules should have documentation (<code>python3 -c &apos;print(__import__(&quot;my_module&quot;).__doc__)&apos;</code>)</li>
                            <li>All your classes should have documentation (<code>python3 -c &apos;print(__import__(&quot;my_module&quot;).MyClass.__doc__)&apos;</code>)</li>
                            <li>All your functions (inside and outside a class) should have documentation (<code>python3 -c &apos;print(__import__(&quot;my_module&quot;).my_function.__doc__)&apos;</code> and&nbsp;<code>python3 -c &apos;print(__import__(&quot;my_module&quot;).MyClass.my_function.__doc__)&apos;</code>)</li>
                            <li>A documentation is not a simple word, it&rsquo;s a real sentence explaining what&rsquo;s the purpose of the module, class or method (the length of it will be verified)</li>
                        </ul>
                        <h3>Python Unit Tests</h3>
                        <ul>
                            <li>Allowed editors:&nbsp;<code>vi</code>,&nbsp;<code>vim</code>,&nbsp;<code>emacs</code></li>
                            <li>All your files should end with a new line</li>
                            <li>All your test files should be inside a folder&nbsp;<code>tests</code></li>
                            <li>You have to use the&nbsp;<a href="https://intranet.alxswe.com/rltoken/g0tzN6ea1hWCj5OF99HB9w" title="unittest module" target="_blank">unittest module</a></li>
                            <li>All your test files should be python files (extension:&nbsp;<code>.py</code>)</li>
                            <li>All your test files and folders should start by&nbsp;<code>test_</code></li>
                            <li>Your file organization in the tests folder should be the same as your project: ex: for&nbsp;<code>models/base_model.py</code>, unit tests must be in:&nbsp;<code>tests/test_models/test_base_model.py</code></li>
                            <li>All your tests should be executed by using this command:&nbsp;<code>python3 -m unittest discover tests</code></li>
                            <li>You can also test file by file by using this command:&nbsp;<code>python3 -m unittest tests/test_models/test_base_model.py</code></li>
                            <li>All your modules should have documentation (<code>python3 -c &apos;print(__import__(&quot;my_module&quot;).__doc__)&apos;</code>)</li>
                            <li>All your classes should have documentation (<code>python3 -c &apos;print(__import__(&quot;my_module&quot;).MyClass.__doc__)&apos;</code>)</li>
                            <li>All your functions (inside and outside a class) should have documentation (<code>python3 -c &apos;print(__import__(&quot;my_module&quot;).my_function.__doc__)&apos;</code> and&nbsp;<code>python3 -c &apos;print(__import__(&quot;my_module&quot;).MyClass.my_function.__doc__)&apos;</code>)</li>
                            <li>We strongly encourage you to work together on test cases, so that you don&rsquo;t miss any edge cases</li>
                        </ul>
                        <h3>SQL Scripts</h3>
                        <ul>
                            <li>Allowed editors:&nbsp;<code>vi</code>,&nbsp;<code>vim</code>,&nbsp;<code>emacs</code></li>
                            <li>All your files will be executed on Ubuntu 20.04 LTS using&nbsp;<code>MySQL 8.0</code></li>
                            <li>Your files will be executed with&nbsp;<code>SQLAlchemy</code> version&nbsp;<code>1.4.x</code></li>
                            <li>All your files should end with a new line</li>
                            <li>All your SQL queries should have a comment just before (i.e. syntax above)</li>
                            <li>All your files should start by a comment describing the task</li>
                            <li>All SQL keywords should be in uppercase (<code>SELECT</code>,&nbsp;<code>WHERE</code>&hellip;)</li>
                            <li>A&nbsp;<code>README.md</code> file, at the root of the folder of the project, is mandatory</li>
                            <li>The length of your files will be tested using&nbsp;<code>wc</code></li>
                        </ul>
                        <h3>GitHub</h3>
                        <p><strong>There should be one project repository per group. If you clone/fork/whatever a partner&rsquo;s project repository with the same name before the second deadline, you risk a 0% score.</strong></p>
                        <h2>More Info</h2>
                        <p><img src="https://s3.amazonaws.com/intranet-projects-files/concepts/74/hbnb_step2.png" alt=""></p>
                        <h3>Comments for your SQL file:</h3>
                        <pre><code>$ cat my_script.sql
-- first 3 students in the Batch ID=3
-- because Batch 3 is the best!
SELECT id, name FROM students WHERE batch_id = 3 ORDER BY created_at DESC LIMIT 3;
$
</code></pre>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <div>
                                <h3>Video library<small>(2&nbsp;total)</small></h3>
                            </div>
                            <div>
                                <div>
                                    <div><input placeholder="Search by title" type="search" value=""></div>
                                </div>
                            </div>
                            <div>
                                <div><span title="">
                                        <div>
                                            <div>
                                                <div><br></div>
                                            </div>
                                            <div>HBNB - storage abstraction</div>
                                        </div>
                                    </span><span title="">
                                        <div>
                                            <div>
                                                <div><br></div>
                                            </div>
                                            <div>AirBnB console</div>
                                        </div>
                                    </span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <h2>Tasks</h2>
                <div>
                    <div>
                        <div>
                            <h3>0. Fork me if you can!</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>In the industry, you will work on an existing codebase 90% of the time. Your first thoughts upon looking at it might include:</p>
                            <ul>
                                <li>&ldquo;Who did this code?&rdquo;</li>
                                <li>&ldquo;How it works?&rdquo;</li>
                                <li>&ldquo;Where are unittests?&rdquo;</li>
                                <li>&ldquo;Where is this?&rdquo;</li>
                                <li>&ldquo;Why did they do that like this?&rdquo;</li>
                                <li>&ldquo;I don&rsquo;t understand anything.&rdquo;</li>
                                <li>&ldquo;&hellip; I will refactor everything&hellip;&rdquo;</li>
                            </ul>
                            <p>But the worst thing you could possibly do is to&nbsp;<strong>redo everything</strong>. Please don&rsquo;t do that!&nbsp;<strong>Note: the existing codebase might be perfect, or it might have errors. Don&rsquo;t always trust the existing codebase!</strong></p>
                            <p>For this project you will fork this&nbsp;<a href="https://github.com/justinmajetich/AirBnB_clone.git" title="codebase" target="_blank">codebase</a>:</p>
                            <ul>
                                <li>update the repository name to&nbsp;<code>AirBnB_clone_v2</code></li>
                                <li>update the&nbsp;<code>README.md</code> with your information&nbsp;<strong>but don&rsquo;t delete the initial authors</strong></li>
                            </ul>
                            <p>If you are the owner of this repository, please create a new repository named&nbsp;<code>AirBnB_clone_v2</code> with the same content of&nbsp;<code>AirBnB_clone</code></p>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done!</button> <button>Help</button> <button>Check your code</button> <button>Get a sandbox</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>1. Bug free!</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>Do you remember the&nbsp;<code>unittest</code> module?</p>
                            <p>This codebase contains many test cases. Some are missing, but the ones included cover the basic functionality of the program.</p>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ python3 -m unittest discover tests 2&gt;&amp;1 /dev/null | tail -n 1
OK
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                            <p>All your unittests&nbsp;<strong>must</strong> pass without any errors at anytime in this project,&nbsp;<strong>with each storage engine!</strong>. Same for PEP8!</p>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ HBNB_ENV=test HBNB_MYSQL_USER=hbnb_test HBNB_MYSQL_PWD=hbnb_test_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_test_db HBNB_TYPE_STORAGE=db python3 -m unittest discover tests 2&gt;&amp;1 /dev/null | tail -n 1
OK
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                            <p>Some tests won&rsquo;t be relevant for some type of storage, please skip them by using the&nbsp;<code>skipIf</code> feature of&nbsp;<a href="https://intranet.alxswe.com/rltoken/Gx_1dJOPPeAyeM6NaXDmjg" title="the Unittest module - 26.3.6. Skipping tests and expected failures" target="_blank">the Unittest module - 26.3.6. Skipping tests and expected failures</a>. Of course, the number of tests must be higher than the current number of tests, so if you decide to skip a test, you should write a new test!</p>
                            <h3>How to test with MySQL?</h3>
                            <p>First, you create a specific database for it (next tasks). After, you have to remember what the purpose of an unittest?</p>
                            <p><strong>&ldquo;Assert a current state (objects/data/database), do an action, and validate this action changed (or not) the state of your objects/data/database&rdquo;</strong></p>
                            <p>For example, &ldquo;you want to validate that the&nbsp;<code>create State name=&quot;California&quot;</code> command in the console will add a new record in your table&nbsp;<code>states</code> in your database&rdquo;, here steps for your unittest:</p>
                            <ul>
                                <li>get the number of current records in the table&nbsp;<code>states</code> (my using a&nbsp;<code>MySQLdb</code> for example - but not SQLAlchemy (remember, you want to test if it works, so it&rsquo;s better to isolate from the system))</li>
                                <li>execute the console command</li>
                                <li>get (again) the number of current records in the table&nbsp;<code>states</code> (same method, with&nbsp;<code>MySQLdb</code>)</li>
                                <li>if the difference is&nbsp;<code>+1</code> =&gt; test passed</li>
                            </ul>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button> <button>Check your code</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>2. Console improvements</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>Update the&nbsp;<code>def do_create(self, arg):</code> function of your command interpreter (<code>console.py</code>) to allow for object creation with given parameters:</p>
                            <ul>
                                <li>Command syntax:&nbsp;<code>create &lt;Class name&gt; &lt;param 1&gt; &lt;param 2&gt; &lt;param 3&gt;...</code></li>
                                <li>Param syntax:&nbsp;<code>&lt;key name&gt;=&lt;value&gt;</code></li>
                                <li>Value syntax:<ul>
                                        <li>String:&nbsp;<code>&quot;&lt;value&gt;&quot;</code>=&gt; starts with a double quote<ul>
                                                <li>any double quote inside the value must be escaped with a backslash&nbsp;<code>\</code></li>
                                                <li>all underscores&nbsp;<code>_</code> must be replace by spaces&nbsp;. Example: You want to set the string&nbsp;<code>My little house</code> to the attribute&nbsp;<code>name</code>, your command line must be&nbsp;<code>name=&quot;My_little_house&quot;</code></li>
                                            </ul>
                                        </li>
                                        <li>Float:&nbsp;<code>&lt;unit&gt;.&lt;decimal&gt;</code> =&gt; contains a dot&nbsp;<code>.</code></li>
                                        <li>Integer:&nbsp;<code>&lt;number&gt;</code> =&gt; default case</li>
                                    </ul>
                                </li>
                                <li>If any parameter doesn&rsquo;t fit with these requirements or can&rsquo;t be recognized correctly by your program, it must be skipped</li>
                            </ul>
                            <p><strong>Don&rsquo;t forget to add tests for this new feature!</strong></p>
                            <p>Also, this new feature will be tested here only with&nbsp;<code>FileStorage</code> engine.</p>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ cat test_params_create
create State name=&quot;California&quot;
create State name=&quot;Arizona&quot;
all State

create Place city_id=&quot;0001&quot; user_id=&quot;0001&quot; name=&quot;My_little_house&quot; number_rooms=4 number_bathrooms=2 max_guest=10 price_by_night=300 latitude=37.773972 longitude=-122.431297
all Place
guillaume@ubuntu:~/AirBnB_v2$ cat test_params_create | ./console.py 
(hbnb) d80e0344-63eb-434a-b1e0-07783522124e
(hbnb) 092c9e5d-6cc0-4eec-aab9-3c1d79cfc2d7
(hbnb) [[State] (d80e0344-63eb-434a-b1e0-07783522124e) {&apos;id&apos;: &apos;d80e0344-63eb-434a-b1e0-07783522124e&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 4, 41, 7, 842160), &apos;updated_at&apos;: datetime.datetime(2017, 11, 10, 4, 41, 7, 842235), &apos;name&apos;: &apos;California&apos;}, [State] (092c9e5d-6cc0-4eec-aab9-3c1d79cfc2d7) {&apos;id&apos;: &apos;092c9e5d-6cc0-4eec-aab9-3c1d79cfc2d7&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 4, 41, 7, 842779), &apos;updated_at&apos;: datetime.datetime(2017, 11, 10, 4, 41, 7, 842792), &apos;name&apos;: &apos;Arizona&apos;}]
(hbnb) (hbnb) 76b65327-9e94-4632-b688-aaa22ab8a124
(hbnb) [[Place] (76b65327-9e94-4632-b688-aaa22ab8a124) {&apos;number_bathrooms&apos;: 2, &apos;longitude&apos;: -122.431297, &apos;city_id&apos;: &apos;0001&apos;, &apos;user_id&apos;: &apos;0001&apos;, &apos;latitude&apos;: 37.773972, &apos;price_by_night&apos;: 300, &apos;name&apos;: &apos;My little house&apos;, &apos;id&apos;: &apos;76b65327-9e94-4632-b688-aaa22ab8a124&apos;, &apos;max_guest&apos;: 10, &apos;number_rooms&apos;: 4, &apos;updated_at&apos;: datetime.datetime(2017, 11, 10, 4, 41, 7, 843774), &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 4, 41, 7, 843747)}]
(hbnb)
guillaume@ubuntu:~/AirBnB_v2$
</code></pre>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                    <li>File:&nbsp;<code>console.py, models/, tests/</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button> <button>Check your code</button> <button>Get a sandbox</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>3. MySQL setup development</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>Write a script that prepares a MySQL server for the project:</p>
                            <ul>
                                <li>A database&nbsp;<code>hbnb_dev_db</code></li>
                                <li>A new user&nbsp;<code>hbnb_dev</code> (in&nbsp;<code>localhost</code>)</li>
                                <li>The password of&nbsp;<code>hbnb_dev</code> should be set to&nbsp;<code>hbnb_dev_pwd</code></li>
                                <li><code>hbnb_dev</code> should have all privileges on the database&nbsp;<code>hbnb_dev_db</code> (and&nbsp;<strong>only this database</strong>)</li>
                                <li><code>hbnb_dev</code> should have&nbsp;<code>SELECT</code> privilege on the database&nbsp;<code>performance_schema</code> (and&nbsp;<strong>only this database</strong>)</li>
                                <li>If the database&nbsp;<code>hbnb_dev_db</code> or the user&nbsp;<code>hbnb_dev</code> already exists, your script should not fail</li>
                            </ul>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ cat setup_mysql_dev.sql | mysql -hlocalhost -uroot -p
Enter password: 
guillaume@ubuntu:~/AirBnB_v2$ echo &quot;SHOW DATABASES;&quot; | mysql -uhbnb_dev -p | grep hbnb_dev_db
Enter password: 
hbnb_dev_db
guillaume@ubuntu:~/AirBnB_v2$ echo &quot;SHOW GRANTS FOR &apos;hbnb_dev&apos;@&apos;localhost&apos;;&quot; | mysql -uroot -p
Enter password: 
Grants for hbnb_dev@localhost
GRANT USAGE ON *.* TO &apos;hbnb_dev&apos;@&apos;localhost&apos;
GRANT SELECT ON `performance_schema`.* TO &apos;hbnb_dev&apos;@&apos;localhost&apos;
GRANT ALL PRIVILEGES ON `hbnb_dev_db`.* TO &apos;hbnb_dev&apos;@&apos;localhost&apos;
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                    <li>File:&nbsp;<code>setup_mysql_dev.sql</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button> <button>Check your code</button> <button>Get a sandbox</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>4. MySQL setup test</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>Write a script that prepares a MySQL server for the project:</p>
                            <ul>
                                <li>A database&nbsp;<code>hbnb_test_db</code></li>
                                <li>A new user&nbsp;<code>hbnb_test</code> (in&nbsp;<code>localhost</code>)</li>
                                <li>The password of&nbsp;<code>hbnb_test</code> should be set to&nbsp;<code>hbnb_test_pwd</code></li>
                                <li><code>hbnb_test</code> should have all privileges on the database&nbsp;<code>hbnb_test_db</code> (and&nbsp;<strong>only this database</strong>)</li>
                                <li><code>hbnb_test</code> should have&nbsp;<code>SELECT</code> privilege on the database&nbsp;<code>performance_schema</code> (and&nbsp;<strong>only this database</strong>)</li>
                                <li>If the database&nbsp;<code>hbnb_test_db</code> or the user&nbsp;<code>hbnb_test</code> already exists, your script should not fail</li>
                            </ul>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ cat setup_mysql_test.sql | mysql -hlocalhost -uroot -p
Enter password: 
guillaume@ubuntu:~/AirBnB_v2$ echo &quot;SHOW DATABASES;&quot; | mysql -uhbnb_test -p | grep hbnb_test_db
Enter password: 
hbnb_test_db
guillaume@ubuntu:~/AirBnB_v2$ echo &quot;SHOW GRANTS FOR &apos;hbnb_test&apos;@&apos;localhost&apos;;&quot; | mysql -uroot -p
Enter password: 
Grants for hbnb_test@localhost
GRANT USAGE ON *.* TO &apos;hbnb_test&apos;@&apos;localhost&apos;
GRANT SELECT ON `performance_schema`.* TO &apos;hbnb_test&apos;@&apos;localhost&apos;
GRANT ALL PRIVILEGES ON `hbnb_test_db`.* TO &apos;hbnb_test&apos;@&apos;localhost&apos;
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                    <li>File:&nbsp;<code>setup_mysql_test.sql</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button> <button>Check your code</button> <button>Get a sandbox</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>5. Delete object</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>Update&nbsp;<code>FileStorage</code>: (<code>models/engine/file_storage.py</code>)</p>
                            <ul>
                                <li>Add a new public instance method:&nbsp;<code>def delete(self, obj=None):</code> to delete&nbsp;<code>obj</code> from&nbsp;<code>__objects</code> if it&rsquo;s inside - if&nbsp;<code>obj</code> is equal to&nbsp;<code>None</code>, the method should not do anything</li>
                                <li>Update the prototype of&nbsp;<code>def all(self)</code> to&nbsp;<code>def all(self, cls=None)</code> - that returns the list of objects of one type of class. Example below with&nbsp;<code>State</code> - it&rsquo;s an optional filtering</li>
                            </ul>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ cat main_delete.py
#!/usr/bin/python3
&quot;&quot;&quot; Test delete feature
&quot;&quot;&quot;
from models.engine.file_storage import FileStorage
from models.state import State

fs = FileStorage()

# All States
all_states = fs.all(State)
print(&quot;All States: {}&quot;.format(len(all_states.keys())))
for state_key in all_states.keys():
    print(all_states[state_key])

# Create a new State
new_state = State()
new_state.name = &quot;California&quot;
fs.new(new_state)
fs.save()
print(&quot;New State: {}&quot;.format(new_state))

# All States
all_states = fs.all(State)
print(&quot;All States: {}&quot;.format(len(all_states.keys())))
for state_key in all_states.keys():
    print(all_states[state_key])

# Create another State
another_state = State()
another_state.name = &quot;Nevada&quot;
fs.new(another_state)
fs.save()
print(&quot;Another State: {}&quot;.format(another_state))

# All States
all_states = fs.all(State)
print(&quot;All States: {}&quot;.format(len(all_states.keys())))
for state_key in all_states.keys():
    print(all_states[state_key])        

# Delete the new State
fs.delete(new_state)

# All States
all_states = fs.all(State)
print(&quot;All States: {}&quot;.format(len(all_states.keys())))
for state_key in all_states.keys():
    print(all_states[state_key])

guillaume@ubuntu:~/AirBnB_v2$ ./main_delete.py
All States: 0
New State: [State] (b0026fc6-116f-4d1a-a9cb-6bb9b299f1ce) {&apos;name&apos;: &apos;California&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 1, 13, 32, 561137), &apos;id&apos;: &apos;b0026fc6-116f-4d1a-a9cb-6bb9b299f1ce&apos;}
All States: 1
[State] (b0026fc6-116f-4d1a-a9cb-6bb9b299f1ce) {&apos;name&apos;: &apos;California&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 1, 13, 32, 561137), &apos;id&apos;: &apos;b0026fc6-116f-4d1a-a9cb-6bb9b299f1ce&apos;}
Another State: [State] (37705d25-8903-4318-9303-6d6d336a22c1) {&apos;name&apos;: &apos;Nevada&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 1, 13, 34, 619133), &apos;id&apos;: &apos;37705d25-8903-4318-9303-6d6d336a22c1&apos;}
All States: 2
[State] (b0026fc6-116f-4d1a-a9cb-6bb9b299f1ce) {&apos;name&apos;: &apos;California&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 1, 13, 32, 561137), &apos;id&apos;: &apos;b0026fc6-116f-4d1a-a9cb-6bb9b299f1ce&apos;}
[State] (37705d25-8903-4318-9303-6d6d336a22c1) {&apos;name&apos;: &apos;Nevada&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 1, 13, 34, 619133), &apos;id&apos;: &apos;37705d25-8903-4318-9303-6d6d336a22c1&apos;}
All States: 1
[State] (37705d25-8903-4318-9303-6d6d336a22c1) {&apos;name&apos;: &apos;Nevada&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 1, 13, 34, 619133), &apos;id&apos;: &apos;37705d25-8903-4318-9303-6d6d336a22c1&apos;}
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                    <li>File:&nbsp;<code>models/engine/file_storage.py</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button> <button>Check your code</button> <button>Get a sandbox</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>6. DBStorage - States and Cities</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>SQLAlchemy will be your best friend!</p>
                            <p>It&rsquo;s time to change your storage engine and use&nbsp;<code>SQLAlchemy</code></p>
                            <p><img src="https://s3.amazonaws.com/alx-intranet.hbtn.io/uploads/medias/2020/9/daaef631636b40e0a279a8f240703e065f9d3481.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIARDDGGGOUSBVO6H7D%2F20230619%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20230619T114814Z&X-Amz-Expires=86400&X-Amz-SignedHeaders=host&X-Amz-Signature=119c840567ea09ce380878ce2048e5603ea6f1bd19056f9ccc191e01d62eaff7" alt=""></p>
                            <p>In the following steps, you will make multiple changes:</p>
                            <ul>
                                <li>the biggest one is the transition between&nbsp;<code>FileStorage</code> and&nbsp;<code>DBStorage</code>: In the industry, you will never find a system who can work with both in the same time - but you will find a lot of services who can manage multiple storage systems. (for example, logs service: in memory, in disk, in database, in ElasticSearch etc&hellip;) - The main concept behind is the&nbsp;<strong>abstraction</strong>: Make your code running without knowing how it&rsquo;s stored.</li>
                                <li>add attributes for SQLAlchemy: they will be class attributes, like previously, with a &ldquo;weird&rdquo; value. Don&rsquo;t worry, these values are for description and mapping to the database. If you change one of these values, or add/remove one attribute of the a model, you will have to delete the database and recreate it in SQL. (Yes it&rsquo;s not optimal, but for development purposes, it&rsquo;s ok. In production, we will add &ldquo;migration mechanism&rdquo; - for the moment, don&rsquo;t spend time on it.)</li>
                            </ul>
                            <p>Please follow all these steps:</p>
                            <p>Update&nbsp;<code>BaseModel</code>: (<code>models/base_model.py</code>)</p>
                            <ul>
                                <li>Create&nbsp;<code>Base = declarative_base()</code> before the class definition of&nbsp;<code>BaseModel</code></li>
                                <li><strong>Note! BaseModel does /not/ inherit from Base. All other classes will inherit from BaseModel to get common values (id,&nbsp;<code>created_at</code>,&nbsp;<code>updated_at</code>), where inheriting from Base will actually cause SQLAlchemy to attempt to map it to a table.</strong></li>
                                <li>Add or replace in the class&nbsp;<code>BaseModel</code>:<ul>
                                        <li>class attribute&nbsp;<code>id</code>
                                            <ul>
                                                <li>represents a column containing a unique string (60 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>primary key</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>created_at</code>
                                            <ul>
                                                <li>represents a column containing a datetime</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>default value is the current datetime (use&nbsp;<code>datetime.utcnow()</code>)</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>updated_at</code>
                                            <ul>
                                                <li>represents a column containing a datetime</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>default value is the current datetime (use&nbsp;<code>datetime.utcnow()</code>)</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li>Move the&nbsp;<code>models.storage.new(self)</code> from&nbsp;<code>def __init__(self, *args, **kwargs):</code> to&nbsp;<code>def save(self):</code> and call it just before&nbsp;<code>models.storage.save()</code></li>
                                <li>In&nbsp;<code>def __init__(self, *args, **kwargs):</code>, manage&nbsp;<code>kwargs</code> to create instance attribute from this dictionary. Ex:&nbsp;<code>kwargs={ &apos;name&apos;: &quot;California&quot; }</code> =&gt;&nbsp;<code>self.name = &quot;California&quot;</code> if it&rsquo;s not already the case</li>
                                <li>Update the&nbsp;<code>to_dict()</code> method of the class&nbsp;<code>BaseModel</code>:<ul>
                                        <li>remove the key&nbsp;<code>_sa_instance_state</code> from the dictionary returned by this method&nbsp;<strong>only if this key exists</strong></li>
                                    </ul>
                                </li>
                                <li>Add a new public instance method:&nbsp;<code>def delete(self):</code> to delete the current instance from the storage (<code>models.storage</code>) by calling the method&nbsp;<code>delete</code></li>
                            </ul>
                            <p>Update&nbsp;<code>City</code>: (<code>models/city.py</code>)</p>
                            <ul>
                                <li><code>City</code> inherits from&nbsp;<code>BaseModel</code> and&nbsp;<code>Base</code> (respect the order)</li>
                                <li>Add or replace in the class&nbsp;<code>City</code>:<ul>
                                        <li>class attribute&nbsp;<code>__tablename__</code>-<ul>
                                                <li>represents the table name,&nbsp;<code>cities</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>name</code>
                                            <ul>
                                                <li>represents a column containing a string (128 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>state_id</code>
                                            <ul>
                                                <li>represents a column containing a string (60 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>is a foreign key to&nbsp;<code>states.id</code></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <p>Update&nbsp;<code>State</code>: (<code>models/state.py</code>)</p>
                            <ul>
                                <li><code>State</code> inherits from&nbsp;<code>BaseModel</code> and&nbsp;<code>Base</code> (respect the order)</li>
                                <li>Add or replace in the class&nbsp;<code>State</code>:<ul>
                                        <li>class attribute&nbsp;<code>__tablename__</code>
                                            <ul>
                                                <li>represents the table name,&nbsp;<code>states</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>name</code>
                                            <ul>
                                                <li>represents a column containing a string (128 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                            </ul>
                                        </li>
                                        <li>for&nbsp;<code>DBStorage</code>: class attribute&nbsp;<code>cities</code> must represent a relationship with the class&nbsp;<code>City</code>. If the&nbsp;<code>State</code> object is deleted, all linked&nbsp;<code>City</code> objects must be automatically deleted. Also, the reference from a&nbsp;<code>City</code> object to his&nbsp;<code>State</code> should be named&nbsp;<code>state</code></li>
                                        <li>for&nbsp;<code>FileStorage</code>: getter attribute&nbsp;<code>cities</code> that returns the list of&nbsp;<code>City</code> instances with&nbsp;<code>state_id</code> equals to the current&nbsp;<code>State.id</code> =&gt; It will be the&nbsp;<code>FileStorage</code> relationship between&nbsp;<code>State</code> and&nbsp;<code>City</code></li>
                                    </ul>
                                </li>
                            </ul>
                            <p>New engine&nbsp;<code>DBStorage</code>: (<code>models/engine/db_storage.py</code>)</p>
                            <ul>
                                <li>Private class attributes:<ul>
                                        <li><code>__engine</code>: set to&nbsp;<code>None</code></li>
                                        <li><code>__session</code>: set to&nbsp;<code>None</code></li>
                                    </ul>
                                </li>
                                <li>Public instance methods:<ul>
                                        <li><code>__init__(self):</code>
                                            <ul>
                                                <li>create the engine (<code>self.__engine</code>)</li>
                                                <li>the engine must be linked to the MySQL database and user created before (<code>hbnb_dev</code> and&nbsp;<code>hbnb_dev_db</code>):<ul>
                                                        <li>dialect:&nbsp;<code>mysql</code></li>
                                                        <li>driver:&nbsp;<code>mysqldb</code></li>
                                                    </ul>
                                                </li>
                                                <li>all of the following values must be retrieved via environment variables:<ul>
                                                        <li>MySQL user:&nbsp;<code>HBNB_MYSQL_USER</code></li>
                                                        <li>MySQL password:&nbsp;<code>HBNB_MYSQL_PWD</code></li>
                                                        <li>MySQL host:&nbsp;<code>HBNB_MYSQL_HOST</code> (here =&nbsp;<code>localhost</code>)</li>
                                                        <li>MySQL database:&nbsp;<code>HBNB_MYSQL_DB</code></li>
                                                    </ul>
                                                </li>
                                                <li>don&rsquo;t forget the option&nbsp;<code>pool_pre_ping=True</code> when you call&nbsp;<code>create_engine</code></li>
                                                <li>drop all tables if the environment variable&nbsp;<code>HBNB_ENV</code> is equal to&nbsp;<code>test</code></li>
                                            </ul>
                                        </li>
                                        <li><code>all(self, cls=None)</code>:<ul>
                                                <li>query on the current database session (<code>self.__session</code>) all objects depending of the class name (argument&nbsp;<code>cls</code>)</li>
                                                <li>if&nbsp;<code>cls=None</code>, query all types of objects (<code>User</code>,&nbsp;<code>State</code>,&nbsp;<code>City</code>,&nbsp;<code>Amenity</code>,&nbsp;<code>Place</code> and&nbsp;<code>Review</code>)</li>
                                                <li>this method must return a dictionary: (like&nbsp;<code>FileStorage</code>)<ul>
                                                        <li>key =&nbsp;<code>&lt;class-name&gt;.&lt;object-id&gt;</code></li>
                                                        <li>value = object</li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                        <li><code>new(self, obj)</code>: add the object to the current database session (<code>self.__session</code>)</li>
                                        <li><code>save(self)</code>: commit all changes of the current database session (<code>self.__session</code>)</li>
                                        <li><code>delete(self, obj=None)</code>: delete from the current database session&nbsp;<code>obj</code> if not&nbsp;<code>None</code></li>
                                        <li><code>reload(self)</code>:<ul>
                                                <li>create all tables in the database (feature of SQLAlchemy) (WARNING: all classes who inherit from&nbsp;<code>Base</code> must be imported before calling&nbsp;<code>Base.metadata.create_all(engine)</code>)</li>
                                                <li>create the current database session (<code>self.__session</code>) from the engine (<code>self.__engine</code>) by using a&nbsp;<a href="https://intranet.alxswe.com/rltoken/FhKkGICnmM0DN4TrlfJw3g" title="sessionmaker" target="_blank">sessionmaker</a> - the option&nbsp;<code>expire_on_commit</code> must be set to&nbsp;<code>False</code> ; and&nbsp;<a href="https://intranet.alxswe.com/rltoken/kSil6Cs0L7bWTXNJTrk9yw" title="scoped_session" target="_blank">scoped_session</a> - to make sure your Session is thread-safe</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <p>Update&nbsp;<code>__init__.py</code>: (<code>models/__init__.py</code>)</p>
                            <ul>
                                <li>Add a conditional depending of the value of the environment variable&nbsp;<code>HBNB_TYPE_STORAGE</code>:<ul>
                                        <li>If equal to&nbsp;<code>db</code>:<ul>
                                                <li>Import&nbsp;<code>DBStorage</code> class in this file</li>
                                                <li>Create an instance of&nbsp;<code>DBStorage</code> and store it in the variable&nbsp;<code>storage</code> (the line&nbsp;<code>storage.reload()</code> should be executed after this instantiation)</li>
                                            </ul>
                                        </li>
                                        <li>Else:<ul>
                                                <li>Import&nbsp;<code>FileStorage</code> class in this file</li>
                                                <li>Create an instance of&nbsp;<code>FileStorage</code> and store it in the variable&nbsp;<code>storage</code> (the line&nbsp;<code>storage.reload()</code> should be executed after this instantiation)</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li>This &ldquo;switch&rdquo; will allow you to change storage type directly by using an environment variable (example below)</li>
                            </ul>
                            <p>State creation:</p>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ echo &apos;create State name=&quot;California&quot;&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) 95a5abab-aa65-4861-9bc6-1da4a36069aa
(hbnb)
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;all State&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) [[State] (95a5abab-aa65-4861-9bc6-1da4a36069aa) {&apos;name&apos;: &apos;California&apos;, &apos;id&apos;: &apos;95a5abab-aa65-4861-9bc6-1da4a36069aa&apos;, &apos;updated_at&apos;: datetime.datetime(2017, 11, 10, 0, 49, 54), &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 0, 49, 54)}]
(hbnb)
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;SELECT * FROM states\G&apos; | mysql -uhbnb_dev -p hbnb_dev_db
Enter password: 
*************************** 1. row ***************************
        id: 95a5abab-aa65-4861-9bc6-1da4a36069aa
created_at: 2017-11-10 00:49:54
updated_at: 2017-11-10 00:49:54
      name: California
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                            <p>City creation:</p>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ echo &apos;create City state_id=&quot;95a5abab-aa65-4861-9bc6-1da4a36069aa&quot; name=&quot;San_Francisco&quot;&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py
(hbnb) 4b457e66-c7c8-4f63-910f-fd91c3b7140b
(hbnb)
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;all City&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) [[City] (4b457e66-c7c8-4f63-910f-fd91c3b7140b) {&apos;id&apos;: &apos;4b457e66-c7c8-4f63-910f-fd91c3b7140b&apos;, &apos;updated_at&apos;: datetime.datetime(2017, 11, 10, 0, 52, 53), &apos;state_id&apos;: &apos;95a5abab-aa65-4861-9bc6-1da4a36069aa&apos;, &apos;name&apos;: &apos;San Francisco&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 0, 52, 53)]
(hbnb)
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ echo &apos;create City state_id=&quot;95a5abab-aa65-4861-9bc6-1da4a36069aa&quot; name=&quot;San_Jose&quot;&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py
(hbnb) a7db3cdc-30e0-4d80-ad8c-679fe45343ba
(hbnb)
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;SELECT * FROM cities\G&apos; | mysql -uhbnb_dev -p hbnb_dev_db
Enter password: 
*************************** 1. row ***************************
        id: 4b457e66-c7c8-4f63-910f-fd91c3b7140b
created_at: 2017-11-10 00:52:53
updated_at: 2017-11-10 00:52:53
      name: San Francisco
  state_id: 95a5abab-aa65-4861-9bc6-1da4a36069aa
*************************** 2. row ***************************
        id: a7db3cdc-30e0-4d80-ad8c-679fe45343ba
created_at: 2017-11-10 00:53:19
updated_at: 2017-11-10 00:53:19
      name: San Jose
  state_id: 95a5abab-aa65-4861-9bc6-1da4a36069aa
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                    <li>File:&nbsp;<code>models/base_model.py, models/city.py, models/state.py, models/engine/db_storage.py, models/__init__.py</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button> <button>Check your code</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>7. DBStorage - User</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>Update&nbsp;<code>User</code>: (<code>models/user.py</code>)</p>
                            <ul>
                                <li><code>User</code> inherits from&nbsp;<code>BaseModel</code> and&nbsp;<code>Base</code> (respect the order)</li>
                                <li>Add or replace in the class&nbsp;<code>User</code>:<ul>
                                        <li>class attribute&nbsp;<code>__tablename__</code>
                                            <ul>
                                                <li>represents the table name,&nbsp;<code>users</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>email</code>
                                            <ul>
                                                <li>represents a column containing a string (128 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>password</code>
                                            <ul>
                                                <li>represents a column containing a string (128 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>first_name</code>
                                            <ul>
                                                <li>represents a column containing a string (128 characters)</li>
                                                <li>can be null</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>last_name</code>
                                            <ul>
                                                <li>represents a column containing a string (128 characters)</li>
                                                <li>can be null</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ echo &apos;create User email=&quot;gui@hbtn.io&quot; password=&quot;guipwd&quot; first_name=&quot;Guillaume&quot; last_name=&quot;Snow&quot;&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) 4f3f4b42-a4c3-4c20-a492-efff10d00c0b
(hbnb) 
guillaume@ubuntu:~/AirBnB_v2$
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;all User&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) [[User] (4f3f4b42-a4c3-4c20-a492-efff10d00c0b) {&apos;updated_at&apos;: datetime.datetime(2017, 11, 10, 1, 17, 26), &apos;id&apos;: &apos;4f3f4b42-a4c3-4c20-a492-efff10d00c0b&apos;, &apos;last_name&apos;: &apos;Snow&apos;, &apos;first_name&apos;: &apos;Guillaume&apos;, &apos;email&apos;: &apos;gui@hbtn.io&apos;, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 1, 17, 26), &apos;password&apos;: &apos;f4ce007d8e84e0910fbdd7a06fa1692d&apos;}]
(hbnb) 
guillaume@ubuntu:~/AirBnB_v2$
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;SELECT * FROM users\G&apos; | mysql -uhbnb_dev -p hbnb_dev_db
Enter password: 
*************************** 1. row ***************************
        id: 4f3f4b42-a4c3-4c20-a492-efff10d00c0b
created_at: 2017-11-10 01:17:26
updated_at: 2017-11-10 01:17:26
     email: gui@hbtn.io
  password: guipwd
first_name: Guillaume
 last_name: Snow
guillaume@ubuntu:~/AirBnB_v2$
</code></pre>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                    <li>File:&nbsp;<code>models/user.py</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button> <button>Check your code</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>8. DBStorage - Place</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>Update&nbsp;<code>Place</code>: (<code>models/place.py</code>)</p>
                            <ul>
                                <li><code>Place</code> inherits from&nbsp;<code>BaseModel</code> and&nbsp;<code>Base</code> (respect the order)</li>
                                <li>Add or replace in the class&nbsp;<code>Place</code>:<ul>
                                        <li>class attribute&nbsp;<code>__tablename__</code>
                                            <ul>
                                                <li>represents the table name,&nbsp;<code>places</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>city_id</code>
                                            <ul>
                                                <li>represents a column containing a string (60 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>is a foreign key to&nbsp;<code>cities.id</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>user_id</code>
                                            <ul>
                                                <li>represents a column containing a string (60 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>is a foreign key to&nbsp;<code>users.id</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>name</code>
                                            <ul>
                                                <li>represents a column containing a string (128 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>description</code>
                                            <ul>
                                                <li>represents a column containing a string (1024 characters)</li>
                                                <li>can be null</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>number_rooms</code>
                                            <ul>
                                                <li>represents a column containing an integer</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>default value:&nbsp;<code>0</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>number_bathrooms</code>
                                            <ul>
                                                <li>represents a column containing an integer</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>default value:&nbsp;<code>0</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>max_guest</code>
                                            <ul>
                                                <li>represents a column containing an integer</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>default value:&nbsp;<code>0</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>price_by_night</code>
                                            <ul>
                                                <li>represents a column containing an integer</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>default value:&nbsp;<code>0</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>latitude</code>
                                            <ul>
                                                <li>represents a column containing a float</li>
                                                <li>can be null</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>longitude</code>
                                            <ul>
                                                <li>represents a column containing a float</li>
                                                <li>can be null</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <p>Update&nbsp;<code>User</code>: (<code>models/user.py</code>)</p>
                            <ul>
                                <li>Add or replace in the class&nbsp;<code>User</code>:<ul>
                                        <li>class attribute&nbsp;<code>places</code> must represent a relationship with the class&nbsp;<code>Place</code>. If the&nbsp;<code>User</code> object is deleted, all linked&nbsp;<code>Place</code> objects must be automatically deleted. Also, the reference from a&nbsp;<code>Place</code> object to his&nbsp;<code>User</code> should be named&nbsp;<code>user</code></li>
                                    </ul>
                                </li>
                            </ul>
                            <p>Update&nbsp;<code>City</code>: (<code>models/city.py</code>)</p>
                            <ul>
                                <li>Add or replace in the class&nbsp;<code>City</code>:<ul>
                                        <li>class attribute&nbsp;<code>places</code> must represent a relationship with the class&nbsp;<code>Place</code>. If the&nbsp;<code>City</code> object is deleted, all linked&nbsp;<code>Place</code> objects must be automatically deleted. Also, the reference from a&nbsp;<code>Place</code> object to his&nbsp;<code>City</code> should be named&nbsp;<code>cities</code></li>
                                    </ul>
                                </li>
                            </ul>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ echo &apos;create Place city_id=&quot;4b457e66-c7c8-4f63-910f-fd91c3b7140b&quot; user_id=&quot;4f3f4b42-a4c3-4c20-a492-efff10d00c0b&quot; name=&quot;Lovely_place&quot; number_rooms=3 number_bathrooms=1 max_guest=6 price_by_night=120 latitude=37.773972 longitude=-122.431297&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) ed72aa02-3286-4891-acbc-9d9fc80a1103
(hbnb) 
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;all Place&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) [[Place] (ed72aa02-3286-4891-acbc-9d9fc80a1103) {&apos;latitude&apos;: 37.774, &apos;city_id&apos;: &apos;4b457e66-c7c8-4f63-910f-fd91c3b7140b&apos;, &apos;price_by_night&apos;: 120, &apos;id&apos;: &apos;ed72aa02-3286-4891-acbc-9d9fc80a1103&apos;, &apos;user_id&apos;: &apos;4f3f4b42-a4c3-4c20-a492-efff10d00c0b&apos;, &apos;max_guest&apos;: 6, &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 1, 22, 30), &apos;description&apos;: None, &apos;number_rooms&apos;: 3, &apos;longitude&apos;: -122.431, &apos;number_bathrooms&apos;: 1, &apos;name&apos;: &apos;&quot;Lovely place&apos;, &apos;updated_at&apos;: datetime.datetime(2017, 11, 10, 1, 22, 30)}]
(hbnb) 
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;SELECT * FROM places\G&apos; | mysql -uhbnb_dev -p hbnb_dev_db
Enter password: 
*************************** 1. row ***************************
              id: ed72aa02-3286-4891-acbc-9d9fc80a1103
      created_at: 2017-11-10 01:22:30
      updated_at: 2017-11-10 01:22:30
         city_id: 4b457e66-c7c8-4f63-910f-fd91c3b7140b
         user_id: 4f3f4b42-a4c3-4c20-a492-efff10d00c0b
            name: &quot;Lovely place&quot;
     description: NULL
    number_rooms: 3
number_bathrooms: 1
       max_guest: 6
  price_by_night: 120
        latitude: 37.774
       longitude: -122.431
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                    <li>File:&nbsp;<code>models/place.py, models/user.py, models/city.py</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button> <button>Check your code</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>9. DBStorage - Review</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>Update&nbsp;<code>Review</code>: (<code>models/review.py</code>)</p>
                            <ul>
                                <li><code>Review</code> inherits from&nbsp;<code>BaseModel</code> and&nbsp;<code>Base</code> (respect the order)</li>
                                <li>Add or replace in the class&nbsp;<code>Review</code>:<ul>
                                        <li>class attribute&nbsp;<code>__tablename__</code>
                                            <ul>
                                                <li>represents the table name,&nbsp;<code>reviews</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>text</code>
                                            <ul>
                                                <li>represents a column containing a string (1024 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>place_id</code>
                                            <ul>
                                                <li>represents a column containing a string (60 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>is a foreign key to&nbsp;<code>places.id</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>user_id</code>
                                            <ul>
                                                <li>represents a column containing a string (60 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                                <li>is a foreign key to&nbsp;<code>users.id</code></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <p>Update&nbsp;<code>User</code>: (<code>models/user.py</code>)</p>
                            <ul>
                                <li>Add or replace in the class&nbsp;<code>User</code>:<ul>
                                        <li>class attribute&nbsp;<code>reviews</code> must represent a relationship with the class&nbsp;<code>Review</code>. If the&nbsp;<code>User</code> object is deleted, all linked&nbsp;<code>Review</code> objects must be automatically deleted. Also, the reference from a&nbsp;<code>Review</code> object to his&nbsp;<code>User</code> should be named&nbsp;<code>user</code></li>
                                    </ul>
                                </li>
                            </ul>
                            <p>Update&nbsp;<code>Place</code>: (<code>models/place.py</code>)</p>
                            <ul>
                                <li>for&nbsp;<code>DBStorage</code>: class attribute&nbsp;<code>reviews</code> must represent a relationship with the class&nbsp;<code>Review</code>. If the&nbsp;<code>Place</code> object is deleted, all linked&nbsp;<code>Review</code> objects must be automatically deleted. Also, the reference from a&nbsp;<code>Review</code> object to his&nbsp;<code>Place</code> should be named&nbsp;<code>place</code></li>
                                <li>for&nbsp;<code>FileStorage</code>: getter attribute&nbsp;<code>reviews</code> that returns the list of&nbsp;<code>Review</code> instances with&nbsp;<code>place_id</code> equals to the current&nbsp;<code>Place.id</code> =&gt; It will be the&nbsp;<code>FileStorage</code> relationship between&nbsp;<code>Place</code> and&nbsp;<code>Review</code></li>
                            </ul>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;create User email=&quot;bob@hbtn.io&quot; password=&quot;bobpwd&quot; first_name=&quot;Bob&quot; last_name=&quot;Dylan&quot;&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) d93638d9-8233-4124-8f4e-17786592908b
(hbnb) 
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;create Review place_id=&quot;ed72aa02-3286-4891-acbc-9d9fc80a1103&quot; user_id=&quot;d93638d9-8233-4124-8f4e-17786592908b&quot; text=&quot;Amazing_place,_huge_kitchen&quot;&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) a2d163d3-1982-48ab-a06b-9dc71e68a791
(hbnb) 
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;all Review&apos; | HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./console.py 
(hbnb) [[Review] (f2616ff2-f723-4d67-85dc-f050a38e0f2f) {&apos;text&apos;: &apos;Amazing place, huge kitchen&apos;, &apos;place_id&apos;: &apos;ed72aa02-3286-4891-acbc-9d9fc80a1103&apos;, &apos;id&apos;: &apos;f2616ff2-f723-4d67-85dc-f050a38e0f2f&apos;, &apos;updated_at&apos;: datetime.datetime(2017, 11, 10, 4, 6, 25), &apos;created_at&apos;: datetime.datetime(2017, 11, 10, 4, 6, 25), &apos;user_id&apos;: &apos;d93638d9-8233-4124-8f4e-17786592908b&apos;}]
(hbnb) 
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;SELECT * FROM reviews\G&apos; | mysql -uhbnb_dev -p hbnb_dev_db
Enter password: 
*************************** 1. row ***************************
        id: f2616ff2-f723-4d67-85dc-f050a38e0f2f
created_at: 2017-11-10 04:06:25
updated_at: 2017-11-10 04:06:25
      text: Amazing place, huge kitchen
  place_id: ed72aa02-3286-4891-acbc-9d9fc80a1103
   user_id: d93638d9-8233-4124-8f4e-17786592908b
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                    <li>File:&nbsp;<code>models/review.py, models/user.py, models/place.py</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button> <button>Check your code</button></div>
                                <div><br></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div>
                        <div>
                            <h3>10. DBStorage - Amenity... and BOOM!</h3>
                            <div>mandatory</div>
                        </div>
                        <div>
                            <p>Update&nbsp;<code>Amenity</code>: (<code>models/amenity.py</code>)</p>
                            <ul>
                                <li><code>Amenity</code> inherits from&nbsp;<code>BaseModel</code> and&nbsp;<code>Base</code> (respect the order)</li>
                                <li>Add or replace in the class&nbsp;<code>Amenity</code>:<ul>
                                        <li>class attribute&nbsp;<code>__tablename__</code>
                                            <ul>
                                                <li>represents the table name,&nbsp;<code>amenities</code></li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>name</code>
                                            <ul>
                                                <li>represents a column containing a string (128 characters)</li>
                                                <li>can&rsquo;t be null</li>
                                            </ul>
                                        </li>
                                        <li>class attribute&nbsp;<code>place_amenities</code> must represent a relationship&nbsp;<a href="https://intranet.alxswe.com/rltoken/LiU5umFamh-YbwWkgd8kNw" title="Many-To-Many" target="_blank">Many-To-Many</a> between the class&nbsp;<code>Place</code> and&nbsp;<code>Amenity</code>. Please see below more detail:&nbsp;<code>place_amenity</code> in the&nbsp;<code>Place</code> update</li>
                                    </ul>
                                </li>
                            </ul>
                            <p>Update&nbsp;<code>Place</code>: (<code>models/place.py</code>)</p>
                            <ul>
                                <li>Add an instance of&nbsp;<a href="https://intranet.alxswe.com/rltoken/Pngd-iHVu-kUMyq5VaC9PQ" title="SQLAlchemy Table" target="_blank">SQLAlchemy Table</a> called&nbsp;<code>place_amenity</code> for creating the relationship&nbsp;<a href="https://intranet.alxswe.com/rltoken/LiU5umFamh-YbwWkgd8kNw" title="Many-To-Many" target="_blank">Many-To-Many</a> between&nbsp;<code>Place</code> and&nbsp;<code>Amenity</code>:<ul>
                                        <li>table name&nbsp;<code>place_amenity</code></li>
                                        <li><code>metadata = Base.metadata</code></li>
                                        <li>2 columns:<ul>
                                                <li><code>place_id</code>, a string of 60 characters foreign key of&nbsp;<code>places.id</code>, primary key in the table and never null</li>
                                                <li><code>amenity_id</code>, a string of 60 characters foreign key of&nbsp;<code>amenities.id</code>, primary key in the table and never null</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li>Update&nbsp;<code>Place</code>class:<ul>
                                        <li>for&nbsp;<code>DBStorage</code>: class attribute&nbsp;<code>amenities</code> must represent a relationship with the class&nbsp;<code>Amenity</code> but also as&nbsp;<code>secondary</code> to&nbsp;<code>place_amenity</code> with option&nbsp;<code>viewonly=False</code> (<code>place_amenity</code> has been define previously)</li>
                                        <li>for&nbsp;<code>FileStorage</code>:<ul>
                                                <li>Getter attribute&nbsp;<code>amenities</code> that returns the list of&nbsp;<code>Amenity</code> instances based on the attribute&nbsp;<code>amenity_ids</code> that contains all&nbsp;<code>Amenity.id</code> linked to the&nbsp;<code>Place</code></li>
                                                <li>Setter attribute&nbsp;<code>amenities</code> that handles&nbsp;<code>append</code> method for adding an&nbsp;<code>Amenity.id</code> to the attribute&nbsp;<code>amenity_ids</code>. This method should accept only&nbsp;<code>Amenity</code> object, otherwise, do nothing.</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            <h3>What&rsquo;s a&nbsp;<code>Many-to-Many</code> relationship?</h3>
                            <p>In our system, we don&rsquo;t want to duplicate amenities (for example, having 10000 time the amenity&nbsp;<code>Wifi</code>), so they will be unique. But, at least 2 places can have the same amenity (like&nbsp;<code>Wifi</code> for example). We are in the case of:</p>
                            <ul>
                                <li>an amenity can be linked to multiple places</li>
                                <li>a place can have multiple amenities</li>
                            </ul>
                            <p>=&nbsp;<code>Many-To-Many</code></p>
                            <p>To make this link working, we will create a third table called&nbsp;<code>place_amenity</code> that will create these links.</p>
                            <p>And you are good, you have a new engine!</p>
                            <pre><code>guillaume@ubuntu:~/AirBnB_v2$ cat main_place_amenities.py 
#!/usr/bin/python3
&quot;&quot;&quot; Test link Many-To-Many Place &lt;&gt; Amenity
&quot;&quot;&quot;
from models import *

# creation of a State
state = State(name=&quot;California&quot;)
state.save()

# creation of a City
city = City(state_id=state.id, name=&quot;San Francisco&quot;)
city.save()

# creation of a User
user = User(email=&quot;john@snow.com&quot;, password=&quot;johnpwd&quot;)
user.save()

# creation of 2 Places
place_1 = Place(user_id=user.id, city_id=city.id, name=&quot;House 1&quot;)
place_1.save()
place_2 = Place(user_id=user.id, city_id=city.id, name=&quot;House 2&quot;)
place_2.save()

# creation of 3 various Amenity
amenity_1 = Amenity(name=&quot;Wifi&quot;)
amenity_1.save()
amenity_2 = Amenity(name=&quot;Cable&quot;)
amenity_2.save()
amenity_3 = Amenity(name=&quot;Oven&quot;)
amenity_3.save()

# link place_1 with 2 amenities
place_1.amenities.append(amenity_1)
place_1.amenities.append(amenity_2)

# link place_2 with 3 amenities
place_2.amenities.append(amenity_1)
place_2.amenities.append(amenity_2)
place_2.amenities.append(amenity_3)

storage.save()

print(&quot;OK&quot;)

guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ HBNB_MYSQL_USER=hbnb_dev HBNB_MYSQL_PWD=hbnb_dev_pwd HBNB_MYSQL_HOST=localhost HBNB_MYSQL_DB=hbnb_dev_db HBNB_TYPE_STORAGE=db ./main_place_amenities.py
OK
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;SELECT * FROM amenities\G&apos; | mysql -uhbnb_dev -p hbnb_dev_db
Enter password: 
*************************** 1. row ***************************
        id: 47321eb8-152a-46df-969a-440aa67a6d59
created_at: 2017-11-10 04:22:02
updated_at: 2017-11-10 04:22:02
      name: Cable
*************************** 2. row ***************************
        id: 4a307e7f-68f9-438f-81c0-8325898dda2a
created_at: 2017-11-10 04:22:02
updated_at: 2017-11-10 04:22:02
      name: Oven
*************************** 3. row ***************************
        id: b80aec52-d0c9-420a-8471-3254572954b6
created_at: 2017-11-10 04:22:02
updated_at: 2017-11-10 04:22:02
      name: Wifi
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;SELECT * FROM places\G&apos; | mysql -uhbnb_dev -p hbnb_dev_db
Enter password: 
*************************** 1. row ***************************
              id: 497e3867-d6e9-4401-9c7c-9687c18d2ac7
      created_at: 2017-11-10 04:22:02
      updated_at: 2017-11-10 04:22:02
         city_id: 9d60df6e-31f7-430c-8162-69e89f4a17aa
         user_id: 9b37bd51-6aef-485f-bf10-c7ab83fea2e9
            name: House 1
     description: NULL
    number_rooms: 0
number_bathrooms: 0
       max_guest: 0
  price_by_night: 0
        latitude: NULL
       longitude: NULL
*************************** 2. row ***************************
              id: db549ae1-4500-4d0c-9b50-4b4978ed229e
      created_at: 2017-11-10 04:22:02
      updated_at: 2017-11-10 04:22:02
         city_id: 9d60df6e-31f7-430c-8162-69e89f4a17aa
         user_id: 9b37bd51-6aef-485f-bf10-c7ab83fea2e9
            name: House 2
     description: NULL
    number_rooms: 0
number_bathrooms: 0
       max_guest: 0
  price_by_night: 0
        latitude: NULL
       longitude: NULL
guillaume@ubuntu:~/AirBnB_v2$ 
guillaume@ubuntu:~/AirBnB_v2$ echo &apos;SELECT * FROM place_amenity\G&apos; | mysql -uhbnb_dev -p hbnb_dev_db
Enter password: 
*************************** 1. row ***************************
  place_id: 497e3867-d6e9-4401-9c7c-9687c18d2ac7
amenity_id: 47321eb8-152a-46df-969a-440aa67a6d59
*************************** 2. row ***************************
  place_id: db549ae1-4500-4d0c-9b50-4b4978ed229e
amenity_id: 47321eb8-152a-46df-969a-440aa67a6d59
*************************** 3. row ***************************
  place_id: db549ae1-4500-4d0c-9b50-4b4978ed229e
amenity_id: 4a307e7f-68f9-438f-81c0-8325898dda2a
*************************** 4. row ***************************
  place_id: 497e3867-d6e9-4401-9c7c-9687c18d2ac7
amenity_id: b80aec52-d0c9-420a-8471-3254572954b6
*************************** 5. row ***************************
  place_id: db549ae1-4500-4d0c-9b50-4b4978ed229e
amenity_id: b80aec52-d0c9-420a-8471-3254572954b6
guillaume@ubuntu:~/AirBnB_v2$ 
</code></pre>
                        </div>
                        <div>
                            <div>
                                <p><strong>Repo:</strong></p>
                                <ul>
                                    <li>GitHub repository:&nbsp;<code>AirBnB_clone_v2</code></li>
                                    <li>File:&nbsp;<code>models/amenity.py, models/place.py</code></li>
                                </ul>
                            </div>
                        </div>
                        <div>
                            <div>
                                <div><button>&nbsp;Done?</button> <button>Help</button>&nbsp;</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </article>
</main>
